---
layout: post
title: "Day 13 - Studying analysis"
categories: [ til, python, SQL ]
---

# Day 13 ‚Äî Python & SQL

üìÖ 2026-01-19

Today is **Day 13 of my learning journey**.

This post is written mainly for myself, but it may also help other beginners.

---

## 1. Why `pd.to_numeric()` is followed by `.astype(int)`

Tutor‚Äôs code:

```python
df["qty"] = pd.to_numeric(df["qty"], errors="coerce")
df["qty"] = df["qty"].fillna(1)
df["qty"] = df["qty"].astype(int)
```
Key points
pd.to_numeric() Converts values to numbers.
Invalid values become NaN when errors="coerce".
Result is usually float, not int, because floats can represent NaN.
.fillna(1): Replaces missing values (NaN) using a business rule (default quantity = 1).
.astype(int): Forces the column to be true integers.
Can only be done after all NaNs are removed.

## 2. What the to_bool() function does
Code:
```python
Copy code
def to_bool(x):
    if isinstance(x, bool):
        return x
    x = str(x).strip().lower()
    return x in ["true", "1", "yes", "y"]
```
Purpose
Convert messy, real-world values into clean True / False.

## 3. isinstance()
‚ÄúIs this value already a True or False?‚Äù
- Why it‚Äôs used
If the value is already a boolean, return it unchanged.
Prevents unnecessary or confusing conversions.
Safer than checking types manually.
Example:
```python
Copy code
isinstance(True, bool)   # True
isinstance("true", bool) # False
```

## 4. Common ‚Äúis-something‚Äù checks you‚Äôll see a lot
- isinstance(x, type)
Check what type something is.

- Series.isin([...]) (pandas)
Check if values are in a list.

- pd.isna(x) / pd.notna(x)
Check for missing data.

- hasattr(x, "attr")
Check if an object has something before using it.

- Golden rule:
If it starts with is, it usually answers a yes/no question.

## 5. Why .apply(to_bool) and NOT to_bool()
Code:
```python
Copy code
df["paid"] = df["paid"].apply(to_bool)
```
Key idea
to_bool ‚Üí the function itself
to_bool() ‚Üí running the function immediately gets the result
.apply() needs the function, not the result.

What .apply() does internally
```python
for value in df["paid"]:
    to_bool(value)
```
So pandas supplies the value ‚Äî you don‚Äôt.